Version 4
SHEET 1 1324 680
WIRE -1408 -192 -1472 -192
WIRE -1248 -192 -1328 -192
WIRE -1712 -160 -1744 -160
WIRE -1584 -160 -1632 -160
WIRE -1472 -160 -1472 -192
WIRE -1472 -160 -1504 -160
WIRE -1328 -112 -1344 -112
WIRE -1344 -96 -1344 -112
WIRE -1472 -80 -1472 -160
WIRE -1376 -80 -1472 -80
WIRE -1312 -64 -1328 -64
WIRE -1248 -64 -1248 -192
WIRE -1248 -64 -1312 -64
WIRE -1744 -48 -1744 -160
WIRE -1712 -48 -1744 -48
WIRE -1472 -48 -1632 -48
WIRE -1376 -48 -1472 -48
WIRE -880 -16 -928 -16
WIRE -1344 0 -1344 -32
WIRE -1328 0 -1344 0
WIRE -928 0 -928 -16
WIRE 704 0 624 0
WIRE -128 16 -432 16
WIRE 128 16 -32 16
WIRE 624 32 624 0
WIRE 704 48 704 0
WIRE -1744 64 -1744 -48
WIRE -1472 64 -1472 32
WIRE -1472 64 -1568 64
WIRE -432 80 -432 16
WIRE -928 96 -928 80
WIRE -928 96 -976 96
WIRE -128 112 -128 96
WIRE -32 112 -32 96
WIRE 624 176 624 112
WIRE 704 176 704 112
WIRE -928 192 -928 176
WIRE -880 192 -928 192
WIRE -432 192 -432 160
WIRE -1568 480 -1568 64
WIRE 128 480 128 16
WIRE 128 480 -1568 480
FLAG -432 192 0
FLAG -432 16 RedeEletrica
FLAG 624 176 0
FLAG 624 0 ADC_micro
FLAG 704 176 0
FLAG -976 96 0
FLAG -880 -16 +V
FLAG -880 192 -V
FLAG -128 112 0
FLAG -32 112 0
FLAG -1328 -112 +V
FLAG -1328 0 -V
FLAG -1744 64 0
SYMBOL voltage -432 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 311 60)
SYMBOL res 608 16 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL cap 688 48 R0
SYMATTR InstName C1
SYMATTR Value 27pF
SYMBOL voltage -928 -16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15V
SYMBOL voltage -928 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 0V
SYMBOL ind2 -112 112 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L1
SYMATTR Value 1H
SYMATTR Type ind
SYMATTR SpiceLine Rser=1u
SYMBOL ind2 -16 112 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 0.0281m
SYMATTR Type ind
SYMBOL Opamps\\opamp2 -1344 -128 R0
WINDOW 0 26 80 Left 2
SYMATTR InstName U2
SYMATTR Value OPA340
SYMBOL res -1616 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -1488 -64 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -1312 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -1488 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL voltage -1728 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 2V
TEXT -464 264 Left 2 !.tran 0 20m 0
TEXT 584 -80 Left 2 ;Emulando o ADC do microcontrolador
TEXT 192 -160 Left 2 ;Coloque sua instrumentação aqui\n(no caso só tem um buffer)
TEXT -568 -48 Left 2 ;Emulando a rede elétrica
TEXT -1024 -72 Left 2 ;Fontes de alimentação
TEXT -464 288 Left 2 !.lib SpiceModel_LM358.mod
TEXT -128 160 Left 2 !K1 L1 L2 0.99
TEXT -176 -48 Left 2 ;Um transformador
TEXT -464 320 Left 2 ;Obs.: Para acoplar os indutores (L) precisa usar o comando "k".\nA relação de transformação é dada pelo valor das indutâncias L1 e L2, note que é uma relação quadrática.\nPrecisa ter algum resistência série no primário, para não ficar só a fonte de tensão e o indutor, no caso coloquei 1u ohm.
TEXT -464 400 Left 2 !.lib SpiceModel_OPA340.mod
TEXT -464 432 Left 2 !.model Z_4 D (bv=3.3 ibv=1m)
RECTANGLE Normal 784 240 560 -64 2
RECTANGLE Normal 528 96 192 -112 2
RECTANGLE Normal -672 240 -1024 -48 2
RECTANGLE Normal -208 240 -560 -32 2
RECTANGLE Normal 64 240 -176 -32 2
